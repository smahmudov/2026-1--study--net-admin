---
## Front matter
title: "Отчёт по лабораторной работе 1"
subtitle: "Знакомство с Cisco Packet Tracer"
author: "Суннатилло Махмудов"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Установка инструмента моделирования конфигурации сети Cisco Packet Tracer, знакомство с его интерфейсом.

# Теоретические сведения

Локальная вычислительная сеть (LAN) представляет собой совокупность взаимосвязанных устройств, обменивающихся данными по каналам связи. Передача информации в сети осуществляется в виде кадров и пакетов, проходящих через различные уровни модели OSI. В данной работе рассматривались принципы взаимодействия устройств на физическом, канальном и сетевом уровнях.

Концентратор (hub) работает на физическом уровне и передаёт входящий сигнал на все порты без анализа содержимого. Все устройства, подключённые к концентратору, используют общий канал передачи данных, поэтому в такой сети возможны коллизии — ситуации, когда несколько устройств одновременно начинают передачу.

Коммутатор (switch) функционирует на канальном уровне и передаёт кадры на основе MAC-адресов. Он запоминает соответствие MAC-адресов и портов в таблице коммутации и направляет данные только нужному получателю. Это уменьшает количество лишнего трафика и практически устраняет коллизии.

Маршрутизатор (router) работает на сетевом уровне и обеспечивает передачу пакетов между различными IP-сетями. Он анализирует IP-адреса источника и назначения и выбирает оптимальный путь доставки данных.

Передача данных в локальной сети сопровождается работой служебных протоколов. Протокол ARP используется для определения MAC-адреса по известному IP-адресу. Протокол ICMP применяется для проверки доступности узлов и передачи диагностических сообщений. Протокол STP предотвращает образование петель в сети с коммутаторами, а CDP позволяет устройствам Cisco обмениваться информацией о соседях.

Кадр Ethernet является основной единицей передачи данных на канальном уровне. Он содержит MAC-адреса источника и получателя, служебную информацию и полезные данные. В зависимости от типа протокола могут использоваться форматы Ethernet II или IEEE 802.3 с LLC/SNAP. Эти механизмы обеспечивают корректную доставку данных между узлами сети.

# Выполнение лабораторной работы

1. Был создан новый проект **lab_PT-01.pkt**. В рабочем пространстве размещены четыре оконечных устройства **PC** и один концентратор **Hub-PT**. Все компьютеры соединены с концентратором прямым кабелем.  

   Далее на каждом компьютере были заданы статические IP-адреса:  
   – PC0: 192.168.1.11  
   – PC1: 192.168.1.12  
   – PC2: 192.168.1.13  
   – PC3: 192.168.1.14  
   Маска подсети для всех устройств: 255.255.255.0.  

   ![Модель сети с концентратором](01.png){ #fig:001 width=80% }  

   ![Настройка статического IP-адреса на ПК](02.png){ #fig:002 width=80% }

2. Проект был переведён из режима **Realtime** в режим **Simulation**. С помощью инструмента **Add Simple PDU** был отправлен пакет от устройства **PC0** к **PC2**.  

   В рабочей области появились два конверта, обозначающие передачу пакетов. В списке событий на панели моделирования отобразились события, соответствующие протоколам **ARP** и **ICMP**. После нажатия кнопки **Play** было прослежено движение пакетов от PC0 к PC2 и обратно.  

   ![Передача пакетов между ПК](03.png){ #fig:003 width=80% }

3. При выборе строки события было открыто окно информации о PDU, в котором исследована работа пакета на уровнях модели OSI. В режиме просмотра **Outbound PDU Details** отображается процесс формирования кадра и его прохождения через уровни.  

   В процессе анализа установлено:  
   – На канальном уровне формируется заголовок Ethernet II;  
   – Указывается MAC-адрес источника и назначения;  
   – На физическом уровне пакет передаётся через интерфейс FastEthernet0.  

   ![Окно OSI Model и информация о PDU](04.png){ #fig:004 width=80% }

4. На вкладке с информацией о структуре PDU была изучена структура ICMP-пакета и Ethernet-кадра.  

   Структура кадра Ethernet включает:  
   – Преамбулу и SFD;  
   – MAC-адрес получателя;  
   – MAC-адрес отправителя;  
   – Поле типа (Type = 0x0800 — IPv4);  
   – Поле данных;  
   – Контрольную сумму (FCS).  

   В составе IP-пакета содержатся:  
   – IP-адрес источника (192.168.1.13);  
   – IP-адрес назначения (192.168.1.11);  
   – TTL, идентификатор и другие служебные поля.  

   В составе ICMP-пакета:  
   – Тип сообщения;  
   – Код;  
   – Контрольная сумма;  
   – Идентификатор и номер последовательности.  

   При передаче пакета через сеть изменяются MAC-адреса отправителя и получателя в заголовке Ethernet, поскольку кадр формируется заново на канальном уровне для каждой передачи. Тип кадра остаётся неизменным — Ethernet II с типом 0x0800.  

   ![Структура пакета Ethernet/IP/ICMP](05.png){ #fig:005 width=80% }

5. Далее список событий был очищен, после чего одновременно были отправлены два пакета:  
   – от PC0 к PC2;  
   – от PC2 к PC0.  

   После нажатия кнопки **Play** была зафиксирована коллизия в сети.  

   ![Возникновение коллизии в концентраторе](06.png){ #fig:006 width=80% }

6. В списке событий было видно, что кадры от разных устройств начали передаваться одновременно. Поскольку концентратор работает на физическом уровне и передаёт сигнал всем портам сразу, в сети возникает ситуация, при которой два устройства передают данные одновременно.  

   Коллизия отображается на схеме в виде наложения кадров. В заголовках пакетов при этом фиксируется ошибка передачи, и устройства выполняют повторную отправку данных после случайной задержки.  

   Причина возникновения коллизии:  
   – Концентратор не разделяет домены коллизий;  
   – Все устройства используют общий канал передачи;  
   – Одновременная передача кадров приводит к их взаимному наложению.  

   ![Отображение коллизии на всех устройствах](07.png){ #fig:007 width=80% }

   ![Структура пакета Ethernet/IP/ICMP](08.png){ #fig:008 width=80% }

7. В режиме **Realtime** в рабочем пространстве был размещён коммутатор **Cisco 2950-24** и четыре оконечных устройства **PC** (PC4–PC7). Все компьютеры подключены к коммутатору прямым кабелем. На каждом ПК заданы статические IP-адреса:  
   – PC4: 192.168.1.21  
   – PC5: 192.168.1.22  
   – PC6: 192.168.1.23  
   – PC7: 192.168.1.24  
   Маска подсети для всех устройств: 255.255.255.0.

   ![Сегмент сети с коммутатором и ПК](09.png){ #fig:009 width=80% }

8. Проект переведён в режим **Simulation**. Инструментом **Add Simple PDU** выполнена отправка пакета от **PC4** к **PC6**. В списке событий появились события **ARP** и **ICMP**, после нажатия **Play** прослежено прохождение пакетов от PC4 к PC6 и обратно.

   ![Передача ARP/ICMP в сегменте с коммутатором](10.png){ #fig:010 width=80% }

   Отличия ARP-сценария по сравнению с концентратором:
   – **ARP-запрос** является широковещательным (broadcast), поэтому коммутатор рассылает его по всем портам, кроме входного (flooding для broadcast);  
   – при этом коммутатор **обучается MAC-адресу источника**, запоминая соответствие *MAC ↔ порт*;  
   – **ARP-ответ** уже является **unicast**, поэтому после обучения таблицы MAC коммутатор пересылает кадр только на нужный порт, а не всем устройствам, как это делает концентратор;  
   – в варианте с хабом каждый кадр физически повторяется на все порты, поэтому “лишние” устройства также получают кадры и наблюдается больше «общего трафика» на сегменте.

9. Изучена структура ICMP-пакета и Ethernet-кадра по вкладке **PDU Details**.

   Структура кадра **Ethernet II** (для ICMP поверх IPv4):
   – Preamble и SFD;  
   – MAC-адрес назначения (Destination);  
   – MAC-адрес источника (Source);  
   – поле **Type** (для IPv4: **0x0800**);  
   – данные (IP-пакет, внутри которого ICMP);  
   – FCS.

   Структура MAC-адреса:
   – длина 48 бит (6 байт);  
   – записывается в виде шести октетов (например, `00D0.BA8B.D44D`);  
   – первые 24 бита — OUI (производитель), оставшиеся 24 бита — уникальная часть устройства.

   Изменения кадра Ethernet при “передвижении” пакета:
   – в пределах одной L2-сети кадр пересылается через коммутатор без изменения IP-адресов;  
   – MAC-адреса в Ethernet-заголовке соответствуют участникам передачи на данном канальном участке (источник/назначение для конкретного кадра).  
   В рассматриваемой топологии (ПК ↔ коммутатор ↔ ПК в одной подсети) кадр направляется коммутатором по таблице MAC, при этом тип кадра остаётся **Ethernet II (0x0800)**.

   ![Структура Ethernet II / IP / ICMP в PDU Details](11.png){ #fig:011 width=80% }

10. Список событий очищен. Затем в режиме моделирования одновременно сформированы два сценария:
   – PDU от **PC4** к **PC6**;  
   – PDU от **PC6** к **PC4**.  
   После запуска **Play** коллизия не возникла.

   Причина отсутствия коллизии:
   – коммутатор разделяет среду передачи на отдельные сегменты: **каждый порт — отдельный домен коллизий**;  
   – кадры пересылаются выборочно на нужный порт, а не всем устройствам;  
   – в типичной настройке порты коммутатора работают в **full-duplex**, поэтому одновременная передача и приём не приводят к коллизиям.

   ![Одновременный обмен без коллизий в сети с коммутатором](12.png){ #fig:012 width=80% }

11. В режиме **Realtime** концентратор и коммутатор соединены **кроссовым кабелем**, затем выполнен переход в **Simulation**. Список событий очищен. Далее сформированы два PDU:
   – от **PC0** к **PC4**;  
   – от **PC4** к **PC0**.  
   После запуска **Play** сначала наблюдалась коллизия, затем пакеты успешно достигли адресатов.

   Объяснение:
   – сегмент с концентратором остаётся общей средой передачи (общий домен коллизий), устройства могут начать передачу одновременно → возникает коллизия;  
   – после коллизии кадры повторно отправляются (механизм CSMA/CD и случайная задержка), и при следующей попытке кадры проходят успешно;  
   – со стороны коммутатора кадры пересылаются адресно, поэтому после “успешного окна” передачи трафик стабильно доходит до получателя.

   ![Связь Hub и Switch](13.png){ #fig:013 width=80% }  
   ![Момент возникновения коллизии при обмене между сегментами](14.png){ #fig:014 width=80% }  
   ![Дальнейшая успешная доставка пакетов](15.png){ #fig:015 width=80% }  
   ![Доставка пакетов после повторной передачи](16.png){ #fig:016 width=80% }  
   ![Фиксация прохождения кадров по соединению Hub–Switch](17.png){ #fig:017 width=80% }

12. После очистки списка событий на панели моделирования выполнен **Play** для получения служебных пакетов **STP**. Изучена структура STP BPDU.

   Особенности кадра для STP:
   – используется формат **IEEE 802.3 + LLC**, то есть вместо поля EtherType применяется поле **Length**;  
   – присутствует LLC-заголовок с DSAP/SSAP (типично **0x42** для STP);  
   – STP BPDU передаётся на зарезервированный групповой MAC-адрес назначения **01:80:C2:00:00:00** (кадры с этим MAC коммутаторы не пересылают как обычный пользовательский трафик);  
   – в BPDU содержатся идентификаторы корневого моста (Root ID), моста-отправителя (Bridge ID), стоимость пути (Root Path Cost), таймеры (Hello Time, Max Age, Forward Delay) и служебные поля протокола.

   Тип кадра Ethernet для STP:
   – **Ethernet 802.3 (LLC)**, то есть кадр определяется по длине и LLC, а не по EtherType.

   Структура MAC-адресов в STP:
   – Destination: `01:80:C2:00:00:00` (служебный multicast для STP);  
   – Source: MAC-адрес порта/коммутатора-отправителя (уникальный адрес устройства).

   ![Структура STP BPDU (Ethernet 802.3 + LLC)](18.png){ #fig:018 width=80% }

13. В режиме **Realtime** в рабочее пространство был добавлен маршрутизатор **Cisco 2811**. Маршрутизатор соединён с коммутатором прямым кабелем.  

На интерфейсе маршрутизатора был задан статический IP-адрес:  
– IP: 192.168.1.254  
– Маска: 255.255.255.0  
Порт был активирован установкой параметра **Port Status = On**.

![Подключение маршрутизатора к коммутатору](19.png){ #fig:019 width=80% }  

14. Проект переведён в режим **Simulation**. Список событий очищен. С помощью инструмента **Add Simple PDU** был отправлен пакет от **PC3** к маршрутизатору. После нажатия **Play** были зафиксированы пакеты протоколов:  
– ARP;  
– ICMP;  
– STP;  
– CDP.  

В процессе моделирования наблюдалось, как кадры проходят от компьютера через концентратор, далее через коммутатор и достигают маршрутизатора.

![Передача пакетов между ПК и маршрутизатором](20.png){ #fig:020 width=80% }

В окне **PDU Details** была изучена структура пакета **CDP (Cisco Discovery Protocol)**.

Структура кадра Ethernet для CDP:
– используется формат **Ethernet 802.3**;  
– поле **Length** указывает размер данных вместо EtherType;  
– далее следует заголовок **LLC/SNAP**;  
– затем располагается информация CDP.

Поля LLC/SNAP:
– DSAP: 0xAA;  
– SSAP: 0xAA;  
– Control: 0x03;  
– OUI: 0x00000C (идентификатор Cisco);  
– PID: 0x2000 (тип протокола CDP).

Структура пакета CDP включает:
– Version — версия протокола;  
– TTL — время жизни;  
– Checksum — контрольная сумма;  
– Набор TLV-полей (Type-Length-Value), содержащих:  
  – идентификатор устройства;  
  – адреса;  
  – информацию об интерфейсе;  
  – сведения о платформе и возможностях.

![Структура кадра CDP в PDU Details](21.png){ #fig:021 width=80% }

Для CDP используется:
– **Ethernet 802.3 + LLC/SNAP**, а не Ethernet II;  
– это служебный кадр канального уровня, применяемый для обмена информацией между сетевыми устройствами Cisco.

MAC-адреса в CDP-кадре имеют следующий вид:

– Destination MAC: **01:00:0C:CC:CC:CC**  
  – это специальный мультикаст-адрес Cisco для служебных сообщений CDP;  
  – такие кадры принимаются соседними устройствами, но не пересылаются дальше.

– Source MAC:  
  – аппаратный адрес интерфейса устройства-отправителя (например, MAC порта коммутатора или маршрутизатора).

# Вывод

В ходе лабораторной работы были изучены принципы передачи данных в локальной сети с использованием концентратора, коммутатора и маршрутизатора в среде Cisco Packet Tracer. Были настроены статические IP-адреса на оконечных устройствах и исследовано прохождение пакетов ARP, ICMP, STP и CDP на различных этапах взаимодействия сетевых устройств.

# Контрольные вопросы

1. **Дайте определение следующим понятиям: концентратор, коммутатор, маршрутизатор, шлюз (gateway). В каких случаях следует использовать тот или иной тип сетевого оборудования?**  

   **Концентратор (Hub)** — это сетевое устройство физического уровня, которое передаёт поступивший сигнал одновременно на все свои порты без анализа адресов. Все подключённые устройства работают в одном домене коллизий. Используется в простых или учебных сетях, где не требуется высокая производительность и управление трафиком.  

   **Коммутатор (Switch)** — это устройство канального уровня, которое передаёт кадры только на тот порт, где находится получатель, используя таблицу MAC-адресов. Уменьшает количество коллизий и повышает эффективность сети. Применяется в локальных сетях для подключения компьютеров, серверов и других устройств.  

   **Маршрутизатор (Router)** — устройство сетевого уровня, предназначенное для соединения разных сетей и передачи пакетов между ними на основе IP-адресов. Используется для связи локальной сети с другими подсетями или Интернетом.  

   **Шлюз (Gateway)** — узел, обеспечивающий взаимодействие между сетями с разными протоколами или архитектурами. Часто роль шлюза выполняет маршрутизатор, который является точкой выхода из локальной сети в другую сеть (например, в Интернет).  

   Использование:
   – концентратор — для простых тестовых соединений;  
   – коммутатор — для построения локальной сети внутри организации;  
   – маршрутизатор — для соединения разных сетей;  
   – шлюз — для выхода из одной сети в другую или для преобразования протоколов.

2. **Дайте определение следующим понятиям: IP-адрес, сетевая маска, broadcast-адрес.**  

   **IP-адрес** — это уникальный логический адрес устройства в сети, используемый для его идентификации и передачи данных. Например, 192.168.1.10.  

   **Сетевая маска** — это параметр, который определяет, какая часть IP-адреса относится к сети, а какая — к узлу. Например, маска 255.255.255.0 показывает, что первые три октета — это адрес сети, а последний — номер устройства.  

   **Broadcast-адрес** — это специальный адрес, используемый для отправки пакета всем устройствам в данной сети. Он формируется установкой всех битов части хоста в 1. Например, для сети 192.168.1.0/24 широковещательный адрес — 192.168.1.255.

3. **Как можно проверить доступность узла сети?**  

   Проверить доступность узла можно с помощью команды **ping**, которая отправляет ICMP Echo-запросы на указанный IP-адрес.  

   Если узел доступен, он отвечает ICMP Echo-ответом, и в результате отображается время отклика.  
   Если ответ не получен, это может означать:
   – узел выключен;  
   – отсутствует сетевое соединение;  
   – неправильно настроен IP-адрес;  
   – блокировка ICMP трафика межсетевым экраном.

	
# Список литературы

1. 802.1D-2004 - IEEE Standard for Local and Metropolitan Area Networks. Media Access Control (MAC) Bridges : тех. отч. / IEEE. — 2004. — С. 1— 277. — DOI: 10.1109/IEEESTD.2004.94569. — URL: http://ieeexplore.ieee.org/servlet/opac?punumber=9155.

2. 802.1Q - Virtual LANs. — URL: http://www.ieee802.org/1/pages/802.1Q.html.

3. A J. Packet Tracer Network Simulator. — Packt Publishing, 2014. — ISBN 9781782170426. — URL: https://books.google.com/books?id=eVOcAgAAQBAJ&dq=cisco+packet+tracer&hl=es&source=gbs_navlinks_s